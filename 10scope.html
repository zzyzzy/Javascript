<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>자바스크립트 scope</title>
</head>
<body>
    <h1>자바스크립트 scope</h1>
    <h2>개요</h2>
    <p>변수가 사용될 수 있는 범위를 scope이라고 함</p>
    <p>global scope : 선언된 변수는 어느 곳에서 든지 접근 가능</p>
    <p>local scope : 선언된 변수는 선언된 영역에서만 접근 가능</p>
    <p>function scope : 함수에 선언된 변수는 함수 안에서만 접근 가능</p>

    <script>
        var a = '123';   // 전역 scope

        {  // 코드블록
            document.write(a, '<br>');
        }
        {
            document.write(a, '<br>');
        }

        let b = () => document.write(a, '<br>');
        b();
    </script>

    <script>
        let c = '456';   // 전역 scope
        {
            document.write(c, '<br>');
        }
        {
            document.write(c, '<br>');
        }
    </script>

    <script>
        {
            let d = '789';     // 지역 scope
            document.write(d, '<br>');
        }
        {
            // d 변수는 지역 scope으로 선언했기 때문에
            // 이 블록에서는 호출 불가!
            //document.write(d, '<br>');
        }
    </script>

    <h2>호이스팅hoisting</h2>
    <p>변수나 함수를 어디서 어떻게 선언하더라도
        항상 컨텍스트내 최상위로 끌고 올라온 뒤
            undefined를 할당해두고 코드를 실행하는 것</p>
    <p>var로 선언한 변수나 선언형 함수를 사용하는 경우 발생함</p>
    <p>따라서, 변수선언시 let을 사용하고, 화살표 함수선언을
        이용하면 호이스팅 문제를 막을 수 있음</p>

    <script>
        // var e = undefined; () // 암묵적 전역
        {
            var e = '321';     // 지역 scope
            document.write(e, '<br>');
        }
        {
            // 호이스팅hoisting
            document.write(e, '<br>');
        }
    </script>

    <script>
        let f = 1;
        let g = 2;
        {
            let f = 3;
            {
                // document.write(f, '<br>');  // 에러발생!
                let f = 4;
                document.write(f, '<br>');
                document.write(g, '<br>');
            }
            document.write(f, '<br>');
            document.write(g, '<br>');
        }
    </script>


    <script>
        function sayHello() {
            document.write('Hello, World!! <br>');
        }

        sayHello();
    </script>

    <script>
        sayHello2();

        function sayHello2() {
            document.write('Hello, Hoisting!! <br>');
        }
    </script>

    <script>
        // sayHello3();

        let sayHello3 = () => {
            document.write('Hello, arrow function!! <br>');
        }

        sayHello3();
    </script>

</body>
</html>